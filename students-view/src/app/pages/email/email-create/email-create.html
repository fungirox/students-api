<h1 class="text-5xl font-extrabold text-slate-800">
    New Email
</h1>
<div class="flex flex-col p-4 w-2/3">
    <form [formGroup]="email_form" (ngSubmit)="createEmail()">
        <div class="w-full py-2"> <!-- E M A I L -->
            <label for="email" class="text-sm font-medium text-slate-700">Email <span class="text-red-700">*</span>
            </label>
            <input class="w-full px-3 py-3 shadow-xs rounded-xl border-default-medium bg-neutral-secondary-medium border 
                text-base text-slate-900 border-slate-500" placeholder="example@domain.me" formControlName="email"
                type="text" id="email" name="email" />
            <div class="px-4">
                @if (email_form.get('email')?.invalid && (email_form.get('email')?.dirty ||
                email_form.get('email')?.touched)) {
                @if(email_form.get('email')?.errors?.["required"]){
                <span class="text-xs text-red-700 italic">email is required</span>
                }
                @if(email_form.get('email')?.errors?.["email"]){
                <span class="text-xs text-red-700 italic">email must be a valid email</span>
                }
                @if(email_form.get('email')?.errors?.["maxlength"]){
                <span class="text-xs text-red-700 italic">email must be at most 100 characters long</span>
                }
                }
            </div>
        </div>
        <div class="w-full py-2">
            <fieldset>
                <legend><span class="text-sm font-medium text-slate-700">Email Type</span></legend>
                <div class="flex flex-row space-x-4">
                    <div class="flex flex-row space-x-2">
                        <label class="text-slate-700"><input name="email_type" type="radio" [value]="'personal'"
                                formControlName="email_type" />Personal</label>
                    </div>
                    <div class="flex flex-row space-x-2">
                        <label class="text-slate-700"><input name="email_type" type="radio" [value]="'professional'"
                                formControlName="email_type" />Professional</label>
                    </div>
                </div>
            </fieldset>
        </div>
        <div class="w-full py-2">
            <label for="student" class="text-sm font-medium text-slate-700">Student <span
                    class="text-red-700">*</span></label>
            <select formControlName="student_id" name="student" id="student" class="w-full px-3 py-3 shadow-xs rounded-xl border-default-medium bg-neutral-secondary-medium border 
                    text-base text-slate-900 border-slate-500">
                @if(student().length > 0){
                    <option value="" selected>Select a student</option>
                    @for (student of students(); track student.id){
                        <option [value]="student['id']">{{ student['first_name'] }} {{ student['last_name']}}</option>
                    }
                } @else{
                    <option value="">You don't have students registered</option>
                }
            </select>         
               <div class="px-4">
                @if (email_form.get('student_id')?.invalid && email_form.get('student_id')?.touched) {
                @if(email_form.get('student_id')?.errors?.["required"]){
                <span class="text-xs text-red-700 italic">Please select a student</span> 
                }
                }
            </div>
        </div>
        <div class="flex flex-row justify-end py-2">
            <div class="w-1/3 flex flex-row justify-between ">
                <button type="button" [routerLink]="['/email/list']"
                    class="bg-slate-100 text-slate-800 rounded-2xl shadow font-medium text-sm px-7 py-2 border">Cancel</button>
                @if(email_form.valid){
                <input type="submit"
                    class="text-slate-100 bg-slate-800 rounded-2xl shadow font-medium text-sm px-7 py-2 border border-slate-800" />
                } @else{
                <input type="submit" disabled
                    class="text-slate-400 bg-slate-200 rounded-2xl shadow font-medium text-sm px-7 py-2 border border-slate-200" />
                }
            </div>
        </div>
    </form>
</div>